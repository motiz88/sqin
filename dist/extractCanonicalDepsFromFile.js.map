{"version":3,"sources":["src/extractCanonicalDepsFromFile.js"],"names":[],"mappings":";;;;;qBAWS,4BAA4B;;;;oBAXpB,MAAM;;;;kBACR,IAAI;;;;mCAEa,uBAAuB;;;;8BAC5B,kBAAkB;;;;AAO7C,SAAS,4BAA4B,CAAC,OAAO,EAAE,SAAS,EAAE;AACtD,WAAO,gBAAG,UAAU,CAAC,WAAW,CAAC,sCAAoB,OAAO,CAAC,CAAC,CACzD,OAAO,CAAC,UAAA,CAAC;eAAI,gBAAG,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;KAAA,CAAC,CACnC,OAAO,CAAC,UAAA,EAAE,EAAI;;AAEX,eAAO,iCAAe,EAAE,EAAE,kBAAK,OAAO,CAAC,OAAO,CAAC,CAAC,SAAM,CAAC,UAAA,CAAC,EAAI;AACxD,aAAC,CAAC,OAAO,GAAG,KAAK,GAAG,OAAO,GAAG,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC;AAC/C,kBAAM,CAAC,CAAC;SACX,CAAC,CAAC;KACN,CAAC,CAAC;CACV","file":"src/extractCanonicalDepsFromFile.js","sourcesContent":["import path from 'path';\r\nimport Rx from 'rx';\r\n\r\nimport extractDepsFromFile from './extractDepsFromFile';\r\nimport getCanonicalId from './getCanonicalId';\r\n\r\nexport\r\ndefault\r\n\r\nfunction extractCanonicalDepsFromFile(sqlFile, depsCache) {\r\n    return Rx.Observable.fromPromise(extractDepsFromFile(sqlFile))\r\n        .flatMap(x => Rx.Observable.from(x))\r\n        .flatMap(id => {\r\n            // console.log(path.basename(sqlFile) + ':  -- requires: ' + id);\r\n            return getCanonicalId(id, path.dirname(sqlFile)).catch(e => {\r\n                e.message = 'In ' + sqlFile + ': ' + e.message;\r\n                throw e;\r\n            });\r\n        });\r\n}\r\n"]}